<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.1 20151215//EN" "JATS-archivearticle1.dtd"> 
<article xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="research-article"><?properties open_access?><?subarticle report16577?><?DTDIdentifier.IdentifierValue -//NLM//DTD Journal Publishing DTD v3.0 20080202//EN?><?DTDIdentifier.IdentifierType public?><?SourceDTD.DTDName journalpublishing3.dtd?><?SourceDTD.Version 3.0?><?ConverterInfo.XSLTName jp2nlmx2.xsl?><?ConverterInfo.Version 2?><front><journal-meta><journal-id journal-id-type="nlm-ta">F1000Res</journal-id><journal-id journal-id-type="iso-abbrev">F1000Res</journal-id><journal-id journal-id-type="pmc">F1000Research</journal-id><journal-title-group><journal-title>F1000Research</journal-title></journal-title-group><issn pub-type="epub">2046-1402</issn><publisher><publisher-name>F1000Research</publisher-name><publisher-loc>London, UK</publisher-loc></publisher></journal-meta><article-meta><article-id pub-id-type="pmcid">5082607</article-id><article-id pub-id-type="doi">10.12688/f1000research.9090.1</article-id><article-categories><subj-group subj-group-type="heading"><subject>Software Tool Article</subject></subj-group><subj-group><subject>Articles</subject><subj-group><subject>Bioinformatics</subject></subj-group></subj-group></article-categories><title-group><article-title>AutoAnnotate: A Cytoscape app for summarizing networks with semantic annotations</article-title><fn-group content-type="pub-status"><fn><p>[version 1; referees: 2 approved]</p></fn></fn-group></title-group><contrib-group><contrib contrib-type="author"><name><surname>Kucera</surname><given-names>Mike</given-names></name><xref ref-type="corresp" rid="c1">a</xref><xref ref-type="aff" rid="a1">1</xref></contrib><contrib contrib-type="author"><name><surname>Isserlin</surname><given-names>Ruth</given-names></name><xref ref-type="aff" rid="a1">1</xref></contrib><contrib contrib-type="author"><name><surname>Arkhangorodsky</surname><given-names>Arkady</given-names></name><xref ref-type="aff" rid="a1">1</xref></contrib><contrib contrib-type="author"><name><surname>Bader</surname><given-names>Gary D.</given-names></name><xref ref-type="aff" rid="a1">1</xref></contrib><aff id="a1"><label>1</label>The Donnelly Centre, University of Toronto, Toronto, Canada</aff></contrib-group><author-notes><corresp id="c1"><label>a</label><email xlink:href="mailto:mikekucera@gmail.com">mikekucera@gmail.com</email></corresp><fn fn-type="con"><p>MK and RI wrote the manuscript. RI provided experimental data to validate the use of the app. AA developed the initial prototype version of the app and provided input on the user interface design. MK developed the final version of the app. GB supervised app development and provided input on the manuscript.</p></fn><fn fn-type="COI-statement"><p>
<bold>Competing interests: </bold>There are no competing interests.</p></fn></author-notes><pub-date pub-type="epub"><day>15</day><month>7</month><year>2016</year></pub-date><pub-date pub-type="collection"><year>2016</year></pub-date><volume>5</volume><elocation-id>1717</elocation-id><history><date date-type="accepted"><day>8</day><month>7</month><year>2016</year></date></history><permissions><copyright-statement>Copyright: &#x000a9; 2016 Kucera M et al.</copyright-statement><copyright-year>2016</copyright-year><license xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p>This is an open access article distributed under the terms of the Creative Commons Attribution Licence, which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.</license-p></license></permissions><self-uri content-type="pdf" xlink:type="simple" xlink:href="f1000research-5-9783.pdf"/><abstract><p>Networks often contain regions of tightly connected nodes, or clusters, that highlight their shared relationships. An effective way to create a visual summary of a network is to identify clusters and annotate them with an enclosing shape and a summarizing label. Cytoscape provides the ability to annotate a network with shapes and labels, however these annotations must be created manually one at a time, which can be a laborious process. AutoAnnotate is a Cytoscape 3 App that automates the process of identifying clusters and visually annotating them. It greatly reduces the time and effort required to fully annotate clusters in a network, and provides freedom to experiment with different strategies for identifying and labelling clusters. Many customization options are available that enable the user to refine the generated annotations as required. Annotated clusters may be collapsed into single nodes using the Cytoscape groups feature, which helps simplify a network by making its overall structure more visible. AutoAnnotate is applicable to any type of network, including enrichment maps, protein-protein interactions, pathways, or social networks.</p></abstract><kwd-group kwd-group-type="author"><kwd>network analysis</kwd><kwd>enrichment map</kwd><kwd>tag cloud</kwd><kwd>network clustering</kwd><kwd>complexity reduction</kwd><kwd>modular networks</kwd><kwd>annotations</kwd><kwd>cytoscape</kwd></kwd-group><funding-group><award-group id="fund-1"><funding-source>National Institutes of Health</funding-source><award-id>P41 GM103504</award-id><award-id>R01 GM070743</award-id></award-group><funding-statement>This work was supported by NRNB (U.S. National Institutes of Health, grant number P41 GM103504) and R01 GM070743.</funding-statement></funding-group></article-meta></front><body><sec sec-type="intro"><title>Introduction</title><p>Identifying clusters of nodes in a network, based on similarity of node attributes or connectivity between the nodes, is useful for defining groups of related nodes. For example, clusters in a protein-protein interaction network often represent molecular complexes, proteins that work together as a group to perform a specific function
<sup><xref rid="ref-1" ref-type="bibr">1</xref></sup>, whereas clusters in a co-authorship network represent a group of authors that often collaborate and publish together.</p><p>Clusters can be used to create a visual summary of a network by drawing an enclosing shape around each cluster and adding a textual summary label next to each cluster (
<xref ref-type="fig" rid="f1">Figure 1</xref>). This technique is often effective in summarizing the results of a network analysis by highlighting main themes and categories within the network.
<ext-link ext-link-type="uri" xlink:href="http://apps.cytoscape.org/apps/autoannotate">AutoAnnotate</ext-link> (
<ext-link ext-link-type="uri" xlink:href="http://apps.cytoscape.org/apps/autoannotate">http://apps.cytoscape.org/apps/autoannotate</ext-link>) was originally created to aid pathway enrichment analysis using the Enrichment Map App
<sup><xref rid="ref-2" ref-type="bibr">2</xref></sup> as every enrichment map requires clustering and annotation, but AutoAnnotate is now being made available as a stand-alone app to benefit other types of analysis.</p><fig fig-type="figure" id="f1" orientation="portrait" position="float"><label>Figure 1. </label><caption><title>AutoAnnotate overview.</title><p>A network is clustered, textual annotation associated with each cluster is automatically summarized as a single cluster label, and the results are visualized. Users can customize the view by selectively collapsing and expanding clusters.</p></caption><graphic xlink:href="f1000research-5-9783-g0000"/></fig><p>Cytoscape enables users to add annotations on top of the network, including arrow, image, shape and text objects. However, fully annotating the clusters in a network can be cumbersome because the user must manually create and position each individual annotation. Furthermore, Cytoscape does not maintain any relationship between the network layout and the annotations, when the layout changes the user must manually reposition the annotations. Because of these limitations some users prefer to export their networks and add annotations using an external application, such as Adobe Illustrator.</p><p>AutoAnnotate is a Cytoscape 3 App that identifies clusters and automatically draws shape and label annotations for each cluster. The enclosing shapes make it visually clear which nodes belong to each cluster when the clusters do not overlap. The generated labels provide a concise semantic summary of the data attached to the nodes in each cluster. AutoAnnotate maintains a relationship between the annotations and the nodes in a cluster, if the layout of the network changes then the annotations are automatically repositioned. AutoAnnotate maintains multiple sets of annotations for a single network, which allows the user to experiment with different clustering algorithms and label generation strategies. Additionally, AutoAnnotate allows clusters to be collapsed, which can simplify large networks by reducing potentially large sections of the network into single nodes.</p><p>AutoAnnotate leverages two existing Cytoscape Apps to do most of its work: clusterMaker2 (
<ext-link ext-link-type="uri" xlink:href="http://apps.cytoscape.org/apps/clustermaker2">http://apps.cytoscape.org/apps/clustermaker2</ext-link>) and WordCloud (
<ext-link ext-link-type="uri" xlink:href="http://apps.cytoscape.org/apps/wordcloud">http://apps.cytoscape.org/apps/wordcloud</ext-link>). The clusterMaker2 App provides several clustering algorithms and is directly called by AutoAnnotate to identify clusters of nodes in the network. The use of clusterMaker2 is optional, and the user may provide their own list of cluster identifiers. WordCloud is a Cytoscape App that creates a visual summary of selected attributes for a set of nodes by displaying a word tag cloud, where more frequent words are displayed using larger font size and adjacent words are grouped closer together. AutoAnnotate invokes WordCloud to generate a word tag cloud for the node data within each cluster, which is used to derive the text for the label annotations.</p><p>AutoAnnotate can be installed from within Cytoscape via the App Manager or from the Cytoscape App Store.</p></sec><sec><title>Operation</title><p>This section discusses a basic overview of the capabilities of AutoAnnotate. A more detailed user manual is available from
<ext-link ext-link-type="uri" xlink:href="http://baderlab.org/Software/AutoAnnotate">http://baderlab.org/Software/AutoAnnotate</ext-link>.</p><p>AutoAnnotate creates and manages a list of &#x0201c;Annotation Sets&#x0201d; for each network. An Annotation Set consists of a group of clusters and their associated annotations. Each network may have one active Annotation Set at time. The user may create as many Annotation Sets as they like, and can easily switch between them. The use-case for supporting multiple Annotation Sets is to allow the user to experiment with different clustering and summarization parameters, and then choose the most satisfactory resulting Annotation Set. Annotation Sets are saved to the Cytoscape session file.</p><p>To create an Annotation Set select
<bold>AutoAnnotate &#x0003e; New Annotation Set&#x02026;</bold> from the
<bold>Apps</bold> menu. A dialog will pop up enabling the users to define the clusters in the network (
<xref ref-type="fig" rid="f2">Figure 2</xref>). Clusters can be defined in two ways: user defined or calculated automatically through AutoAnnotate. AutoAnnotate accepts any node attribute associated with the network to define clusters. Nodes with the same value for the attribute will be placed in the same cluster. This enables users to import cluster definitions from external programs or clustering algorithms. Alternately, clusters can be calculated within Cytoscape using the clusterMaker2 App
<sup><xref rid="ref-3" ref-type="bibr">3</xref></sup> which enables users to cluster a network using one of many clustering algorithms it provides. The clusterMaker2 algorithms are available as commands or from the Apps menu. Most of the algorithms can generate a cluster ID attribute in the node table, which can be consumed by AutoAnnotate. For convenience, AutoAnnotate also provides access to a subset of the clusterMaker2 algorithms directly from the Create Annotate Set dialog (
<xref ref-type="fig" rid="f2">Figure 2</xref>). This enables a user to quickly get started using AutoAnnotate without knowing the fine details of clusterMaker2. Currently, due to the simplified interface within AutoAnnotate, only clustering algorithms that take zero or one parameters and that run quickly are available directly from AutoAnnotate. After the clusters are computed, a label for each cluster is generated by the WordCloud app
<sup><xref rid="ref-4" ref-type="bibr">4</xref></sup>.</p><fig fig-type="figure" id="f2" orientation="portrait" position="float"><label>Figure 2. </label><caption><title>The Create Annotation Set dialog.</title><p>Cluster options: ClusterMaker2 requires a clustering algorithm and edge weight attribute to be selected, otherwise a node attribute must be selected. Label options: User selects the node attribute to use for creating labels, the labelling algorithm to use, and the maximum number of words per label.</p></caption><graphic xlink:href="f1000research-5-9783-g0001"/></fig><p>Once clusters and labels are calculated, AutoAnnotate automatically adds them as annotations to the network (
<italic>e.g</italic>. ellipses around each cluster). Clusters are contained within bounding annotation shapes with its corresponding label as a text annotation directly above it. The look of the label and shape annotations may be modified using the Display Options panel (
<xref ref-type="fig" rid="f3">Figure 3</xref>). From this panel the user can adjust border width, shape type, opacity and visibility for shape annotations, and font size, font scaling and visibility for label annotations.</p><fig fig-type="figure" id="f3" orientation="portrait" position="float"><label>Figure 3. </label><caption><title>The Display Options panel.</title><p>Changing parameters here automatically updates the display.</p></caption><graphic xlink:href="f1000research-5-9783-g0002"/></fig><p>After an Annotation Set is created, it is shown in the main AutoAnnotate panel (
<xref ref-type="fig" rid="f4">Figure 4</xref>). This panel allows the user to choose which Annotation Set is currently active for each network. When an Annotation Set is active, a list of all its clusters and labels is displayed in the table. Each row represents one annotation (
<italic>i.e</italic>. one cluster with its computed label) with the number of nodes it contains and whether it is collapsed or not.</p><fig fig-type="figure" id="f4" orientation="portrait" position="float"><label>Figure 4. </label><caption><title>The main Annotation Set panel.</title><p>Clusters and labels are shown. Clusters can be collapsed or expanded. An annotation can be customized via options available in a context sensitive (right click) menu.</p></caption><graphic xlink:href="f1000research-5-9783-g0003"/></fig><p>Although AutoAnnotate aims to automatically create the best labels and annotations, it also enables users to customize the resulting annotations. Clusters and labels can be manually adjusted. Multiple clusters can be combined. New clusters can be created from selected nodes directly in the network view. Labels can be re-generated automatically based on different label options. New Annotation Sets can be created by selecting a subset of clusters from an existing Annotation Set.</p><p>To further simplify complex networks AutoAnnotate has the ability to collapse some or all of the clusters automatically. The set of nodes belonging to a cluster are removed and replaced with a single group node representing the set. The group node is named using the computed label. When all clusters in a complex network are collapsed, it can substantially decrease the complexity of the network so that major themes or structure of the underlying network is more readily apparent.</p></sec><sec><title>Implementation</title><sec><title>Feature implementation</title><p>WordCloud registers a command service that calculates a word-cloud given a set of nodes and one or more node attributes. AutoAnnotate calls this command once for each cluster. The results of the command are placed in a list of WordInfo objects, which contain the font size of each word, the order that words appeared in the attributes (maintains word order), and the word adjacency group that contains the word. The word adjacency group is an identifier assigned to each word based on the number of times words occur in adjacent positions.</p><p>WordCloud computes word frequencies which AutoAnnotate then uses to calculate the best combination of words to describe the given cluster, considering word frequency in the cluster compared to that in the entire network. Normally WordCloud returns all of the words in the cloud, however AutoAnnotate uses a maximum of 1&#x02013;10 words to make a label, and therefore must make a decision of which words from the cloud to use and in which order. AutoAnnotate currently has two options for deciding this. The &#x0201c;Biggest Words&#x0201d; option sorts the words by font size, takes the N largest words, then sorts the result by word order (this preserves the original order that the words appeared in the selected attribute). The &#x0201c;Adjacent Words&#x0201d; option is a heuristic that attempts to balance word size with word adjacency information. First the words are sorted by font size, then a size bonus is added to every word that is in the same adjacency group as the N largest words. This causes words that are in the same group as the N largest words to be more likely to be chosen. The size bonus cannot cause a word to become bigger than the largest word in the group. Then the list is sorted again by size and the N largest words are selected. We have found through trial and error with many networks that a size bonus of eight results in labels that provide a good semantic description of the nodes in the cluster. Thus, we have made this the default label making option.</p><p>The Cytoscape group nodes feature is used to collapse clusters. When AutoAnnotate collapses a cluster it first creates a group node that contains all the nodes in the cluster and then the group node is collapsed. The shape and label annotations are no longer drawn for the collapsed cluster. When the cluster is collapsed Cytoscape will create "meta-edges" between the group node and any other nodes it is connected to. The collapsed group nodes and the meta-edges provide a summary of the network. When a cluster is expanded the group node is first expanded and is then deleted. Collapsed groups must be expanded before switching to another Annotation Set because the nodes contained in each group may belong to different clusters in the other Annotation Set.</p></sec><sec><title>Software design</title><p>AutoAnnotate is a Cytoscape bundle App based on the Cytoscape 3-supported OSGi (Open Services Gateway Initiative) (
<ext-link ext-link-type="uri" xlink:href="https://www.osgi.org/developer/specifications/">https://www.osgi.org/developer/specifications/</ext-link>) module framework. AutoAnnotate version 1.1 depends on Java 8, the Cytoscape 3.3 API and WordCloud 3.1. The Cytoscape App Manager or the Cytoscape App Store installs WordCloud automatically when installing AutoAnnotate. ClusterMaker2 is not installed automatically because it is optional. To make installation of clusterMaker2 easier for the user the Create Annotation Set dialog attempts to detect the presence of clusterMaker2, and if not available the user is presented with a web link to the App Store page for clusterMaker2 from which they can install it.</p><p>Cytoscape makes its extensive API available to apps via a number of OSGi service interfaces. These services must be acquired in a bundle activator lifecycle method that is called when the App is initialized. Traditionally the service references are passed down the chain of constructors that build the App&#x02019;s object graph. This technique is known as Dependency Injection, since a class&#x02019; dependencies are &#x0201c;injected&#x0201d; when the class is instantiated rather than the class having the responsibility of looking up the dependencies it needs. Dependency Injection is a well known software design pattern that improves modularity and facilitates unit testing. However, in Cytoscape this Dependency Injection is traditionally done manually, by hand-coding constructor parameter lists, which is verbose and error prone. AutoAnnotate uses the Google Guice Dependency Injection framework (
<ext-link ext-link-type="uri" xlink:href="https://github.com/google/guice/wiki/GettingStarted">https://github.com/google/guice/wiki/GettingStarted</ext-link>) along with the Peaberry OSGi adapter (
<ext-link ext-link-type="uri" xlink:href="https://github.com/google/guice/wiki/OSGi">https://github.com/google/guice/wiki/OSGi</ext-link>). Guice is configured to acquire Cytoscape services through Peaberry, and those services are then made available to all objects instantiated through Guice, removing the need to hand code constructor method parameter lists. The result is cleaner code that is easier to maintain and unit test.</p><p>The internal architecture of AutoAnnotate is divided into three main modules and some smaller supporting modules. The three main modules are: 1) Data Model, which is controlled by the Model Manager and contains the model for Annotation Sets, clusters, display options and labels. The Data Model is saved to the Cytoscape session file. 2) The UI, which consists of the main panel (
<xref ref-type="fig" rid="f4">Figure 4</xref>), the display options panel (
<xref ref-type="fig" rid="f3">Figure 3</xref>), the create annotation set dialog (
<xref ref-type="fig" rid="f2">Figure 2</xref>), menu items, and various other information and warning dialogs. 3) The Annotation Renderer, which draws the label and shape annotations on the network canvas.</p><p>The Model Manager listens to Cytoscape events, such as events for nodes being selected, and modifies the Data Model to stay in sync with Cytoscape. The Model Manager emits Model Events whenever the Data Model changes, caused by reacting to Cytoscape events or caused by user interaction. Client modules that listen to model events do not use the traditional observer pattern
<sup><xref rid="ref-5" ref-type="bibr">5</xref></sup>, which is ubiquitous in object oriented user interface programming, instead the EventBus class from the Google Guava library is used. An EventBus allows event subscribers to be fully decoupled from event sources since each source does not need to maintain a listener list. The Model Manager emits the Model Events over the EventBus and the other main modules (UI and Renderer) subscribe to the EventBus and declare which event types they want to receive. Subscribing to the EventBus is very simple since it is injected by Guice. When the user interacts with a control in one of the UI panels a mutator method is called on the data model, this in turn fires a model event, which causes the rest of the UI to be updated. The UI and network view are kept in sync with the model without introducing any direct dependencies between the UI panels, the annotation renderer or the data model.
<xref ref-type="fig" rid="f5">Figure 5</xref> depicts the event flow.</p><fig fig-type="figure" id="f5" orientation="portrait" position="float"><label>Figure 5. </label><caption><title>Event Flow.</title><p>1) Cytoscape events are fired using OSGi services (
<italic>e.g.</italic> SetCurrentNetworkViewEvent, NetworkViewAboutToBeDestroyedEvent). 2) The AutoAnnotate Model Manager reacts to Cytoscape events and updates the Data Model. 3) The ModelManager fires Model Events over the Guava EventBus (
<italic>e.g.</italic> AnnotationSetAddedEvent, ClusterAddedEvent). 4) The UI and Annotation Renderer modules each respond to a subset of the model events. There is no direct dependency between the UI and the Annotation Renderer. 5) The UI directly updates the Model, which causes Model Events to fire, which updates the UI and Annotations.</p></caption><graphic xlink:href="f1000research-5-9783-g0004"/></fig><p>Integration with the WordCloud and clusterMaker2 Apps is made possible via the Cytoscape command-executor API (
<ext-link ext-link-type="uri" xlink:href="http://chianti.ucsd.edu/cytoscape-3.4.0/API/org/cytoscape/command/package-summary.html">http://chianti.ucsd.edu/cytoscape-3.4.0/API/org/cytoscape/command/package-summary.html</ext-link>). ClusterMaker2 registers a command service for each of the clustering algorithms it provides. AutoAnnotate calls these commands using the CommandExecutorTaskFactory service.</p></sec></sec><sec><title>Results and discussion</title><p>We present four use cases for AutoAnnotate. The first, the most common use case, is an enrichment map. Clusters in an enrichment map represent similar pathways and processes. AutoAnnotate offers a way to easily summarize the main themes present in the network and is used routinely by enrichment map users. The second use case further demonstrates AutoAnnotate summarization capabilities by demonstrating how an annotated network can be collapsed to just its major themes. The third use case demonstrates how AutoAnnotate can be used for a different type of network, a co-authorship network. Finally, the fourth use case demonstrates another network type, a protein-protein interaction (PPI) network annotated with Gene Ontology (GO) terms
<sup><xref rid="ref-6" ref-type="bibr">6</xref></sup>, to demonstrate how multiple annotation sets for an individual network can be used to summarize the same network to get different results.</p></sec><sec><title>Use case 1 - Enrichment maps</title><p>An enrichment map is a graphical representation of a pathway enrichment analysis where nodes represent pathways and edges the crosstalk (or shared genes) between connecting pathways. To illustrate this, we downloaded gene expression from the TCGA Ovarian serous cystadenocarcinoma RNASeq V2 cohort on 2015-05-22 from cBioPortal for Cancer Genomics (
<ext-link ext-link-type="uri" xlink:href="http://www.cbioportal.org/data_sets.jsp">http://www.cbioportal.org/data_sets.jsp</ext-link>). Enrichment analysis was conducted on a subset of this data as described in the enrichment map protocol
<sup><xref rid="ref-7" ref-type="bibr">7</xref></sup>. As an example, the resulting enrichment map was annotated using AutoAnnotate (
<xref ref-type="fig" rid="f6">Figure 6A</xref>).</p><fig fig-type="figure" id="f6" orientation="portrait" position="float"><label>Figure 6. </label><caption><title>AutoAnnotated enrichment map.</title><p>(
<bold>A</bold>) Annotated enrichment map (
<bold>B</bold>) Collapsed enrichment map.</p></caption><graphic xlink:href="f1000research-5-9783-g0005"/></fig><p>Enrichment results from an ovarian cancer gene expression analysis are depicted as an enrichment map (q-value&#x0003c;0.0001, enrichment analysis performed as per EM protocol
<sup><xref rid="ref-7" ref-type="bibr">7</xref></sup>). The resulting enrichment map was annotated using parameters - WordCloud normalization of 0.5, MCL clustering, and pathway description was used for label calculation (
<xref ref-type="fig" rid="f6">Figure 6A</xref>). WordCloud calculates the word frequencies of the attribute selected. For an enrichment map we chose the pathway description attribute to calculate labels as it contains a concise description of each node. The normalization factor controls how the word frequencies are weighted compared to the words in the rest of network. With a normalization factor of zero the significance of each word is calculated solely on how many occurrences it has in the given cluster. This may cause very frequent words within the network such as &#x0201c;pathway&#x0201d; or &#x0201c;regulation&#x0201d; to be prominent in annotations as they are found often in pathway descriptions. By increasing the normalization factor, we increase the weight calculated from the ratio of a word frequency in the cluster to its frequency in the entire network to diminish the presence of these recurrent words in the cluster labels.</p></sec><sec><title>Use case 2 - Collapsed AutoAnnotated enrichment map</title><p>In an enrichment map visualization (and networks of other types) our gaze often gravitates towards the largest most densely connected region or cluster. In an enrichment map such clusters do not necessarily represent the most important themes of the analysis but instead biological pathways that are well studied and documented in public databases. AutoAnnotate allows users to normalize this bias by collapsing the network. Both large and small clusters become a single node labelled with the computed annotation and nodes not part of any cluster retain their original pathway or node name. In this format large clusters are no more important than single nodes but it is easy to quickly see the major themes of an analysis even within large complicated networks. The enrichment map was further summarized by collapsing all clusters to individual group nodes that represent the cluster and are named according to the annotation given. To Collapse the network simply select &#x0201c;Collapse All&#x0201d; from the AutoAnnotate Input panel menu (
<xref ref-type="fig" rid="f6">Figure 6B</xref>).</p></sec><sec><title>Use case 3 - Co-authorship network</title><p>AutoAnnotate is not limited to enrichment maps. Any standard network can be annotated based on node attributes in the network. For example, co-authorship networks where nodes are authors and edges connect two authors that have published together can also be annotated by AutoAnnotate. Using all the publications that had Cytoscape in its title/abstract/keyword as extracted from Scopus
<sup><xref rid="ref-8" ref-type="bibr">8</xref></sup> using the SocialNetworkApp
<sup><xref rid="ref-9" ref-type="bibr">9</xref></sup> we constructed a co-authorship network. The large network was filtered to contain only authors that had more than 20 citations. The resulting network (
<xref ref-type="fig" rid="f7">Figure 7</xref>) was annotated using the &#x02018;publications&#x02019; attribute that contains the titles of every article an author published (in this case any article that contained the word &#x02018;cytoscape&#x02019; in its title/abstract/keywords for the given author). The WordCloud normalization factor was set to 0.3 (slightly smaller than the previous enrichment map use case). Given that the set of articles dealt exclusively with Cytoscape they shared many similar words and themes. A high normalization factor would have eliminated most of these similar words like &#x02018;network&#x02019;, &#x02018;analysis&#x02019; and &#x02018;biological&#x02019;. We wanted to highlight the different areas that use Cytoscape as well as the prominent purposes. Experimenting with the WordCloud normalization factor allowed us to find the ideal balance. The annotated network was collapsed to show the varied themes of the articles relating to Cytoscape.</p><fig fig-type="figure" id="f7" orientation="portrait" position="float"><label>Figure 7. </label><caption><title>Co-authorship network for article containing &#x02018;Cytoscape&#x02019; in its title/abstract/keyword.</title><p>The most central node was annotated with an additional image representing the top words in the set of publications as generated by wordle.com.</p></caption><graphic xlink:href="f1000research-5-9783-g0006"/></fig></sec><sec><title>Use case 4 - PPI network</title><p>AutoAnnotate enables the user to create multiple annotations based on different parameters and easily toggle between the different annotations.
<xref ref-type="fig" rid="f8">Figure 8</xref> shows the annotation of a PPI network generated from co-purified complexes
<sup><xref rid="ref-10" ref-type="bibr">10</xref></sup>. A subset of complexes was annotated using different attributes including protein names, GO biological process, molecular function or cellular component. Depending on the attribute used to compute annotations the summarization gives a slightly different view of the data.</p><fig fig-type="figure" id="f8" orientation="portrait" position="float"><label>Figure 8. </label><caption><title>Running AutoAnnotate on a PPI network.</title><p>Four different annotations for the same base PPI network using parameters - WordCloud normalization of 0, previously created cluster designations, and
<bold>A</bold>. protein names,
<bold>B</bold>. GO biological process,
<bold>C</bold>. GO molecular function, or
<bold>D</bold>. GO cellular component was used for label calculation.</p></caption><graphic xlink:href="f1000research-5-9783-g0007"/></fig></sec><sec sec-type="conclusions"><title>Conclusion</title><p>AutoAnnotate aids in network analysis and interpretation by providing a concise visual summary of clusters in a network. Clusters can be visualized either as shape and text annotations overlaid on top of the network, or by collapsing the clusters into single nodes.</p><p>Users can get started quickly with AutoAnnotate by accepting the defaults when creating an Annotation Set. More advanced users can experiment with different strategies for generating clusters and labels. Users are free to specify clusters themselves manually or using other clustering tools.</p><p>AutoAnnotate fits into a larger workflow to help analyze a network or help present the results of an analysis. For example AutoAnnotate is an important part of the enrichment map protocol.</p></sec><sec><title>Software availability</title><p>Homepage:
<ext-link ext-link-type="uri" xlink:href="http://baderlab.org/Software/AutoAnnotate">http://baderlab.org/Software/AutoAnnotate</ext-link>
</p><p>Software available from:
<ext-link ext-link-type="uri" xlink:href="http://apps.cytoscape.org/apps/autoannotate">http://apps.cytoscape.org/apps/autoannotate</ext-link>
</p><p>Latest source code:
<ext-link ext-link-type="uri" xlink:href="https://github.com/BaderLab/AutoAnnotateApp">https://github.com/BaderLab/AutoAnnotateApp</ext-link>
</p><p>Archived source code as at the time of publication:</p><p>
<ext-link ext-link-type="uri" xlink:href="https://zenodo.org/record/57021#.V3vOgpMrJE4">https://zenodo.org/record/57021#.V3vOgpMrJE4</ext-link>
<sup><xref rid="ref-11" ref-type="bibr">11</xref></sup>
</p><p>License: Lesser GNU Public License 2.1:
<ext-link ext-link-type="uri" xlink:href="https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html">https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html</ext-link>
</p></sec></body><back><ack><title>Acknowledgements</title></ack><ref-list><ref id="ref-1"><label>1</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Bader</surname><given-names>GD</given-names></name><name><surname>Hogue</surname><given-names>CW</given-names></name></person-group>:
<article-title>An automated method for finding molecular complexes in large protein interaction networks.</article-title>
<source><italic>BMC bioinformatics.</italic></source>
<year>2003</year>;<volume>4</volume>(<issue>1</issue>):<fpage>2</fpage>.
<pub-id pub-id-type="doi">10.1186/1471-2105-4-2</pub-id>
<!--<pub-id pub-id-type="pmcid">149346</pub-id>-->
<?supplied-pmid 12525261?><pub-id pub-id-type="pmid">12525261</pub-id></mixed-citation></ref><ref id="ref-2"><label>2</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Merico</surname><given-names>D</given-names></name><name><surname>Isserlin</surname><given-names>R</given-names></name><name><surname>Stueker</surname><given-names>O</given-names></name><etal/></person-group>:
<article-title>Enrichment map: a network-based method for gene-set enrichment visualization and interpretation.</article-title>
<source><italic>PLoS One.</italic></source>
<year>2010</year>;<volume>5</volume>(<issue>11</issue>):<fpage>e13984</fpage>.
<pub-id pub-id-type="doi">10.1371/journal.pone.0013984</pub-id>
<!--<pub-id pub-id-type="pmcid">2981572</pub-id>-->
<?supplied-pmid 21085593?><pub-id pub-id-type="pmid">21085593</pub-id></mixed-citation></ref><ref id="ref-3"><label>3</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Morris</surname><given-names>JH</given-names></name><name><surname>Apeltsin</surname><given-names>L</given-names></name><name><surname>Newman</surname><given-names>AM</given-names></name><etal/></person-group>:
<article-title>
<italic>clusterMaker:</italic> a multi-algorithm clustering plugin for Cytoscape.</article-title>
<source><italic>BMC bioinformatics.</italic></source>
<year>2011</year>;<volume>12</volume>(<issue>1</issue>):<fpage>436</fpage>.
<pub-id pub-id-type="doi">10.1186/1471-2105-12-436</pub-id>
<!--<pub-id pub-id-type="pmcid">3262844</pub-id>-->
<?supplied-pmid 22070249?><pub-id pub-id-type="pmid">22070249</pub-id></mixed-citation></ref><ref id="ref-4"><label>4</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Oesper</surname><given-names>L</given-names></name><name><surname>Merico</surname><given-names>D</given-names></name><name><surname>Isserlin</surname><given-names>R</given-names></name><etal/></person-group>:
<article-title>WordCloud: a Cytoscape plugin to create a visual semantic summary of networks.</article-title>
<source><italic>Source Code Biol Med.</italic></source>
<year>2011</year>;<volume>6</volume>(<issue>1</issue>):<fpage>7</fpage>.
<pub-id pub-id-type="doi">10.1186/1751-0473-6-7</pub-id>
<!--<pub-id pub-id-type="pmcid">3083346</pub-id>-->
<?supplied-pmid 21473782?><pub-id pub-id-type="pmid">21473782</pub-id></mixed-citation></ref><ref id="ref-5"><label>5</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Vlissides</surname><given-names>J</given-names></name><name><surname>Helm</surname><given-names>R</given-names></name><name><surname>Johnson</surname><given-names>R</given-names></name><etal/></person-group>:
<article-title>Design patterns: Elements of reusable object-oriented software.</article-title>Reading: Addison-Wesley.<year>1995</year>;<volume>49</volume>(<issue>120</issue>):<fpage>11</fpage>
<ext-link ext-link-type="uri" xlink:href="https://books.google.co.in/books?vid=ISBN0201633612&#x00026;redir_esc=y">Reference Source</ext-link>
</mixed-citation></ref><ref id="ref-6"><label>6</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Ashburner</surname><given-names>M</given-names></name><name><surname>Ball</surname><given-names>CA</given-names></name><name><surname>Blake</surname><given-names>JA</given-names></name><etal/></person-group>:
<article-title>Gene ontology: tool for the unification of biology. The Gene Ontology Consortium.</article-title>
<source><italic>Nat Genet.</italic></source>
<year>2000</year>;<volume>25</volume>(<issue>1</issue>):<fpage>25</fpage>&#x02013;<lpage>29</lpage>.
<pub-id pub-id-type="doi">10.1038/75556</pub-id>
<!--<pub-id pub-id-type="pmcid">3037419</pub-id>-->
<?supplied-pmid 10802651?><pub-id pub-id-type="pmid">10802651</pub-id></mixed-citation></ref><ref id="ref-7"><label>7</label><mixed-citation publication-type="journal">
<article-title>EnrichmentMap protocol.</article-title>(in preparation).</mixed-citation></ref><ref id="ref-8"><label>8</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Burnham</surname><given-names>JF</given-names></name></person-group>:
<article-title>Scopus database: a review.</article-title>
<source><italic>Biomed Digit Libr.</italic></source>
<year>2006</year>;<volume>3</volume>(<issue>1</issue>):<fpage>1</fpage>.
<pub-id pub-id-type="doi">10.1186/1742-5581-3-1</pub-id>
<!--<pub-id pub-id-type="pmcid">1420322</pub-id>-->
<?supplied-pmid 16522216?><pub-id pub-id-type="pmid">16522216</pub-id></mixed-citation></ref><ref id="ref-9"><label>9</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Kofia</surname><given-names>V</given-names></name><name><surname>Isserlin</surname><given-names>R</given-names></name><name><surname>Buchan</surname><given-names>AM</given-names></name><etal/></person-group>:
<article-title>Social Network: a Cytoscape app for visualizing co-authorship networks [version 3; referees: 1 approved, 2 approved with reservations].</article-title>
<source><italic>F1000Res.</italic></source>
<year>2015</year>;<volume>4</volume>:<fpage>481</fpage>.
<pub-id pub-id-type="doi">10.12688/f1000research.6804.3</pub-id>
<!--<pub-id pub-id-type="pmcid">4760270</pub-id>-->
<?supplied-pmid 26949516?><pub-id pub-id-type="pmid">26949516</pub-id></mixed-citation></ref><ref id="ref-10"><label>10</label><mixed-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Havugimana</surname><given-names>PC</given-names></name><name><surname>Hart</surname><given-names>GT</given-names></name><name><surname>Nepusz</surname><given-names>T</given-names></name><etal/></person-group>:
<article-title>A census of human soluble protein complexes.</article-title>
<source><italic>Cell.</italic></source>
<year>2012</year>;<volume>150</volume>(<issue>5</issue>):<fpage>1068</fpage>&#x02013;<lpage>1081</lpage>.
<pub-id pub-id-type="doi">10.1016/j.cell.2012.08.011</pub-id>
<!--<pub-id pub-id-type="pmcid">3477804</pub-id>-->
<?supplied-pmid 22939629?><pub-id pub-id-type="pmid">22939629</pub-id></mixed-citation></ref><ref id="ref-11"><label>11</label><mixed-citation publication-type="software">
<person-group person-group-type="author"><name><surname>Kucera</surname><given-names>M</given-names></name></person-group>:
<article-title>AutoAnnotateApp: AutoAnnotate 1.1.0.</article-title>
<source><italic>Zenodo.</italic></source>
<year>2016</year>
<pub-id pub-id-type="doi">10.5281/zenodo.57021</pub-id>
</mixed-citation></ref></ref-list></back><sub-article id="report16577" article-type="peer-review"><front-stub><article-id pub-id-type="doi">10.5256/f1000research.9783.r16577</article-id><title-group><article-title>Referee response for version 1</article-title></title-group><contrib-group><contrib contrib-type="author"><name><surname>Nijveen</surname><given-names>Harm</given-names></name><xref ref-type="aff" rid="r16577a1">1</xref><role>Referee</role></contrib><aff id="r16577a1"><label>1</label>Bioinformatics Group, Department of Plant Sciences, Wageningen University, Wageningen, Netherlands</aff></contrib-group><author-notes><fn fn-type="COI-statement"><p>
<bold>Competing interests: </bold>No competing interests were disclosed.</p></fn></author-notes><pub-date pub-type="epub"><day>24</day><month>10</month><year>2016</year></pub-date><related-article id="d36e1026" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.9090.1">Version 1</related-article><custom-meta-group><custom-meta><meta-name>recommendation</meta-name><meta-value>approve</meta-value></custom-meta></custom-meta-group></front-stub><body><p>AutoAnnotate is a Cytoscape app that can make complex networks easier to interpret by clustering nodes and labelling the clusters with relevant terms. Clusters can be collapsed into single nodes, greatly simplifying the network. The app is easy to use and allows configuration of quite of number of settings. The clusters are labelled based on the most frequent words in a (configurable) node column, using functionality from the WordCloud app.</p><p> The proper labelling of the clusters can require some toying with the parameters and manual curation, both in AutoAnnotate and WordCloud. For instance, using the AlzheimerEM.cys network from the WordCloud tutorial a cluster was labelled with the terms &#x0201c;interphase cycle&#x0201d;, where &#x0201c;cell cycle&#x0201d; would be more appropriate. The word &#x0201c;cell&#x0201d; was omitted due to the default &#x0201c;Normalize&#x0201d; setting of the WordCloud app that prevented very frequent words to be present in a label. Lowering this setting from 0.5 to 0.3 changed the label to &#x0201c;cell cycle&#x0201d;. This is described in the quite elaborate AutoAnnotated User Guide.</p><p> I have also tested the app with the SeedNet network (http://netvis.ico2s.org/dev/seednet/#/static/Data) which is a co-expression network that has 8,621 nodes with 502,173 interactions. The nodes were pre-clustered with MCODE into 136 clusters. It took AutoAnnotate a few minutes to annotate the clusters (on a MBP 2012), which is acceptable, and then about 10 seconds to generate a summary network. The produced cluster labels were&#x000a0; based on the annotation of the clustered genes. The labels were not very informative because there were hardly any common words in the annotations. This was obvious from the words in the labels, and from the output of the WordCloud app for a cluster. For a future version of the app it might be an idea to scale the font of the label by the frequency of the chosen words (now the font can be scaled by the cluster size), to indicate how descriptive a label is for a certain cluster.</p><p> The manuscript is well written and to the point.</p><p> In the following two lines the plural &#x0201c;they&#x0201d; refers to the singular &#x0201c;user&#x0201d;:</p><p> &#x0201c;The USER may create as many Annotation Sets as THEY like, and can easily switch between them.&#x0201d;</p><p> &#x0201c;if not available the USER is presented with a web link to the App Store page for clusterMaker2 from</p><p> which THEY can install it.&#x0201d;</p><p> AutoAnnotate is a useful addition to the collection of Cytoscape apps, and will undoubtedly help many users to create an informative summary of a complex network.</p><p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard.</p></body></sub-article><sub-article id="report16447" article-type="peer-review"><front-stub><article-id pub-id-type="doi">10.5256/f1000research.9783.r16447</article-id><title-group><article-title>Referee response for version 1</article-title></title-group><contrib-group><contrib contrib-type="author"><name><surname>Porras Mill&#x000e1;n</surname><given-names>Pablo</given-names></name><xref ref-type="aff" rid="r16447a1">1</xref><role>Referee</role></contrib><aff id="r16447a1"><label>1</label>European Molecular Biology Laboratory, European Bioinformatics Institute, Hinxton, UK</aff></contrib-group><author-notes><fn fn-type="COI-statement"><p>
<bold>Competing interests: </bold>No competing interests were disclosed.</p></fn></author-notes><pub-date pub-type="epub"><day>4</day><month>10</month><year>2016</year></pub-date><related-article id="d36e1101" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.9090.1">Version 1</related-article><custom-meta-group><custom-meta><meta-name>recommendation</meta-name><meta-value>approve</meta-value></custom-meta></custom-meta-group></front-stub><body><p>The authors present a new Cytoscape app, AutoAnnotate, that integrates topological cluster search with automatic annotation in order to help visualize underlying structures in complex networks. The tool comes to complement previous work by the same authors in other Cytoscape apps such as EnrichmentMap or WordCloud. This app provides a much-needed tool for semi-automatic annotation and visualization of complex network data.</p><p> I found the app particularly useful when used to visually annotate and summarize term enrichment analysis results, which was its original design motivation. Used in combination with EnrichmentMap it provides users with enhanced visualization options on popular tools, such as BiNGO, g:Profiler or DAVID.</p><p> The manuscript is clearly and concisely written, providing a nice introduction on the app functionality, its motivation and how to start using it. The tutorial referenced in the text is also quite useful, I have followed it to test the app with different use cases and I could get satisfactory displays without spending much time tweaking my results. The examples shown were also relevant and helped showing the app capabilities, although I would have welcomed an example using third party tool data, such as sorting out the network visualization output of BiNGO.</p><p> To summarize, this is a valuable tool that I hope to see much used in network annotation visualization in the future.</p><p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard.</p></body></sub-article></article>